webpackJsonp([6],{Gu7T:function(t,i,e){"use strict";i.__esModule=!0;var s,a=e("c/Tr"),o=(s=a)&&s.__esModule?s:{default:s};i.default=function(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return(0,o.default)(t)}},dWdU:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("pFYg"),a=e.n(s),o=e("Gu7T"),n=e.n(o),h=e("BO1k"),r=e.n(h),l=e("QLXH"),c={name:"loongTableTree",data:function(){return{dataWid:[],notWid:[],setWid:0,count:0,index:0,dataFin:[],layerNumber:0,layerArr:[],isShowRow:[],isSelect:[],isFT:[],chooseData:[],finChooseData:[],rowData:[],difference:"",callData:[],showClass:[],isSelectAllShow:!1}},methods:{getWid:function(){for(var t in this.tableTitle)""!=this.tableTitle[t].width&&void 0!=this.tableTitle[t].width?(this.setWid=this.setWid+parseInt(this.tableTitle[t].width),this.dataWid[t]=parseInt(this.tableTitle[t].width)-31):(this.count++,this.notWid.push(t))},getRemainWid:function(t,i){this.difference=i;var e=(t-this.setWid)/this.count-31,s=!0,a=!1,o=void 0;try{for(var n,h=r()(this.notWid);!(s=(n=h.next()).done);s=!0){var l=n.value;this.$set(this.dataWid,l,e)}}catch(t){a=!0,o=t}finally{try{!s&&h.return&&h.return()}finally{if(a)throw o}}console.log(i),this.$set(this.dataWid,this.dataWid.length-2,e-i)},setTree:function(t,i){for(var e in t){this.index++,this.layerNumber=-1==i?0:this.layerArr[i]+1,this.layerArr[this.index]=this.layerNumber;var s=0!=t[e].children.length&&void 0!=t[e].children,a={id:this.index,parentId:i,hasChild:s,layerNumber:this.layerNumber},o={},n=!0,h=!1,l=void 0;try{for(var c,d=r()(this.tableTitle);!(n=(c=d.next()).done);n=!0){var u=c.value;a[u.name]=t[e][u.name],o[u.name]=t[e][u.name]}}catch(t){h=!0,l=t}finally{try{!n&&d.return&&d.return()}finally{if(h)throw l}}this.dataFin.push(a),this.rowData.push(o),this.isSpread?this.isShowRow.push({show:!0}):this.isShowRow.push({show:-1==i,icon:"icon-jiantouyou"}),s&&this.isTree&&this.setTree(t[e].children,this.index)}},spreadRow:function(t){var i=!1;for(var e in this.dataFin)this.dataFin[e].parentId==t+1&&(this.isShowRow[e].show=!this.isShowRow[e].show,i=this.isShowRow[e].show);i||this.setFalse(t+1),this.isShowRow[t].icon=i?"icon-jiantouxia":"icon-jiantouyou",this.setBodyWid(),this.setShowClass()},setShowClass:function(){var t=0;for(var i in this.isShowRow)this.isShowRow[i].show?(t++,this.showClass[i]=t%2?"back-odd":"back-even"):this.showClass[i]="back-odd"},setFalse:function(t){for(var i in this.dataFin)this.dataFin[i].parentId==t&&(this.isShowRow[i].show=!1,this.isShowRow[i].icon="icon-jiantouyou",this.setFalse(this.dataFin[i].id))},checkBoxShow:function(t){this.isFT=[],this.finChooseData=[],this.isTree?(this.setChildBox(t),this.setParentBox(t)):this.notTree(t);var i=!0,e=!1,s=void 0;try{for(var a,o=r()(this.chooseData);!(i=(a=o.next()).done);i=!0){var n=a.value;""!=n&&void 0!=n&&this.finChooseData.push(n)}}catch(t){e=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(e)throw s}}this.$emit("chooseData",this.finChooseData),this.finChooseData.length==this.rowData.length?this.isSelectAllShow=!0:this.isSelectAllShow=!1},setChildBox:function(t,i,e){var s=e;for(var a in i||(this.$set(this.isSelect,t,!this.isSelect[t]),s=this.isSelect[t],this.chooseData[t]=s?this.rowData[t]:""),this.dataFin)this.dataFin[a].parentId==t+1&&(this.$set(this.isSelect,a,s),this.chooseData[a]=s?this.rowData[a]:"",this.setChildBox(this.dataFin[a].id-1,!0,s))},setParentBox:function(t){for(var i in this.dataFin)this.dataFin[t].parentId==this.dataFin[i].id&&(this.isSelectAll(this.dataFin[i].id),this.setParentBox(i))},isSelectAll:function(t){var i=0,e=0;for(var s in this.dataFin)this.dataFin[s].parentId==t&&(this.isSelect[s]?e++:i++);e==i+e?(this.$set(this.isSelect,t-1,!0),this.chooseData[t-1]=this.rowData[t-1]):(this.$set(this.isSelect,t-1,!1),this.chooseData[t-1]="")},rowClick:function(t){this.rowSelect&&this.checkBoxShow(t)},setBodyWid:function(){this.$nextTick(function(){this.titleWid=this.$refs.headerRow.offsetWidth,this.bodyWid=this.$refs.tableBody.offsetWidth;var t=this.titleWid-this.bodyWid;this.getRemainWid(this.titleWid,t)})},notTree:function(t){""!=this.chooseData[t]&&void 0!=this.chooseData[t]?(this.chooseData[t]="",this.$set(this.isSelect,t,!1)):(this.chooseData[t]=this.rowData[t],this.$set(this.isSelect,t,!0))},checkBoxAllShow:function(){for(var t in this.isSelectAllShow=!this.isSelectAllShow,this.rowData)this.isSelect[t]=this.isSelectAllShow;this.chooseData=this.isSelectAllShow?[].concat(n()(this.rowData)):[],this.$emit("chooseData",this.chooseData)},clickGlobal:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.setBodyWid()},500)})}},created:function(){this.getWid()},mounted:function(){var t=this;window.onresize=function(){t.setBodyWid()}},filters:{formater:function(t,i,e){var s=void 0===i?"undefined":a()(i);return"undefined"==s?t:"function"==s?i(t,e):"string"==s&&"dateFormat"==i?Object(l.a)(t,e):void 0}},watch:{tableData:function(t,i){this.layerArr=[],this.dataFin=[],this.rowData=[],this.isShowRow=[],this.isSelect=[],this.chooseData=[],this.isSelectAllShow=!1,this.setTree(t,"-1"),this.setBodyWid(),this.setShowClass()}},props:{tableTitle:{},tableData:{},isSpread:{default:!1},hasCheckbox:{default:!1},rowSelect:{default:!1},minWid:{default:"300px"},isTree:{default:!0}}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"table-tree"},[e("div",{staticClass:"table"},[e("div",{staticClass:"table-header",style:{minWidth:t.minWid}},[e("div",{ref:"headerRow",staticClass:"table-row header-row fs14 c3"},t._l(t.tableTitle,function(i,s){return e("div",{staticClass:"row-details c9 fs12",class:[s!=t.tableTitle.length-1?"borRight":""],style:{width:t.dataWid[s]+"px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==s&&!t.isTree,expression:"index==0&&!isTree"}],staticClass:"fs14 iconCheck fl"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasCheckbox,expression:"hasCheckbox"}],staticStyle:{width:"14px","margin-right":"5px"}},[e("div",{staticClass:"table-checkbox",class:[t.isSelectAllShow?"select-checkbox":""],on:{click:function(i){return i.stopPropagation(),t.checkBoxAllShow()}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-gou"}})])])])]),t._v("\n          "+t._s(i.title)+"\n        ")])}),0)]),t._v(" "),e("div",{ref:"bodyRef",staticClass:"table-body",style:{minWidth:t.minWid}},[e("div",{ref:"tableBody"},t._l(t.dataFin,function(i,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowRow[s].show,expression:"isShowRow[dataIn].show"}],staticClass:"body-row",class:t.showClass[s],on:{click:function(i){return t.rowClick(s)}}},t._l(t.tableTitle,function(a,o){return e("div",{staticClass:"row-details c3 fs12",class:[o!=t.tableTitle.length-1?"borRight":""],style:{width:t.dataWid[o]+"px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==o,expression:"index==0"}],staticClass:"fs14 iconCheck",style:{paddingLeft:30*i.layerNumber+"px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSpread&&t.isTree,expression:"!isSpread&&isTree"}],staticStyle:{width:"14px","margin-right":"5px"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:i.hasChild,expression:"data.hasChild"}],staticClass:"cursor-pointer",staticStyle:{color:"rgb(51,51,51)"},on:{click:function(i){return i.stopPropagation(),t.spreadRow(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#"+t.isShowRow[s].icon}})])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasCheckbox,expression:"hasCheckbox"}],staticStyle:{width:"14px","margin-right":"5px"}},[e("div",{staticClass:"table-checkbox",class:[t.isSelect[s]?"select-checkbox":""],on:{click:function(i){return i.stopPropagation(),t.checkBoxShow(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-gou"}})])])])]),t._v(" "),"button"==a.type?e("div",t._l(a.operations,function(i){return e("span",{staticClass:"fs16 color-1188dd cursor-pointer",staticStyle:{"margin-right":"5px"},attrs:{title:i.text},on:{click:function(e){return i.callBack(t.rowData[s])}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":i.icon}})])])}),0):e("div",{class:[a.overflowEllipsis?"ellip":"newline"],attrs:{title:a.overflowEllipsis?t.$options.filters.formater(i[a.name],a.formater,a.pattern):""},domProps:{innerHTML:t._s(t.$options.filters.formater(i[a.name],a.formater,a.pattern))}})])}),0)}),0)])])])},staticRenderFns:[]};var u=e("VU/8")(c,d,!1,function(t){e("fg+l")},"data-v-2bb72a18",null).exports,f=e("TslM"),w=e("mtWM"),v=e.n(w),p={name:"tableTree",data:function(){return{pageSize:10,pageNum:1,datas:"",totalPage:1,limits:[10,20,30,40,50,60],minWid:"960px",rowSelect:!1,isSpread:!1,hasCheckbox:!0,isTree:!1,tableTitle:[{name:"blkId",title:"id",width:"250px",formater:function(t){return'<span class="c9 fs14" style="margin-right: 5px"><svg class="icon" aria-hidden="true">\n    <use xlink:href="#icon-bumen"></use>\n</svg></span><span>'+t+"</span>"}},{name:"name",title:"名称",overflowEllipsis:!0},{name:"status",title:"状态"},{name:"ctime",title:"创建时间",formater:"dateFormat",pattern:"Y-M-D h:m:s"},{name:"operation",title:"操作",type:"button",width:"100px",operations:[{icon:"#icon-kelong",text:"扩容",callBack:function(t){console.log(t)}},{icon:"#icon-rongliangguanli",text:"修改",callBack:function(t){console.log(t)}}]}]}},methods:{getPageData:function(t){console.log(t),this.pageSize=t.pageSize,this.pageNum=t.pageNum,this.getTableData()},chooseData:function(t){console.log(t)},getTableData:function(){var t=this;this.isRequest=!1,v.a.get("http://13.15.11.34:3000/getTree",{params:{pageSize:this.pageSize,pageNum:this.pageNum}}).then(function(i){t.totalPage=i.data.totalPage,t.datas=i.data.data,t.totalPage=i.data.totalPage,console.log(i.data)}).catch(function(t){alert("请求失败了哦")})}},components:{loongTableTree:u,loongPagination:f.a},created:function(){this.getTableData()}},g={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"table"},[e("div",{staticStyle:{height:"calc(100% - 100px)"}},[e("loongTableTree",{attrs:{tableTitle:t.tableTitle,tableData:t.datas,isSpread:t.isSpread,hasCheckbox:t.hasCheckbox,rowSelect:t.rowSelect,minWid:t.minWid,isTree:t.isTree},on:{chooseData:t.chooseData}})],1),t._v(" "),e("div",[e("loongPagination",{attrs:{totalPage:t.totalPage,limits:t.limits,pageNum:t.pageNum,pageSize:t.pageSize},on:{pageInfo:t.getPageData}})],1)])},staticRenderFns:[]};var m=e("VU/8")(p,g,!1,function(t){e("pBmt")},"data-v-6547535d",null);i.default=m.exports},"fg+l":function(t,i){},pBmt:function(t,i){}});
//# sourceMappingURL=6.0375f19c511d9f4aa524.js.map