webpackJsonp([4],{"7nRM":function(t,e,i){"use strict";e.__esModule=!0;var s,a=i("c/Tr"),o=(s=a)&&s.__esModule?s:{default:s};e.default=function(t){return Array.isArray(t)?t:(0,o.default)(t)}},"7ysL":function(t,e){},KwWi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("TslM"),a=i("pFYg"),o=i.n(a),n=i("mvHQ"),h=i.n(n),r=i("7nRM"),l=i.n(r),c=i("BO1k"),d=i.n(c),u=i("QLXH"),f=(i("x/SH"),{name:"LoongTable",data:function(){return{setWid:0,count:0,notWid:[],dataWid:[],titleWid:0,bodyWid:0,isShowMore:[[]],iconShow:[[]],reallyShow:[[]],pageArr:[],dataSelected:[],prompt:[-1,-1,-1,-1],moreTop:"10px",isSelect:[],countT:0,countF:0,selectData:[],datas:this.data,sendData:[]}},props:{titleData:{},data:{},chooseWay:{default:"checkbox"},isRequest:{default:!0},isFlow:{default:"page"},selectWay:{default:"selectBox"},tableHei:{default:"42px"},pageSize:{default:10},pageNum:{default:1},hasMemory:{default:!1},refresh:{default:!1}},methods:{getWid:function(){for(var t in this.titleData)""!=this.titleData[t].width&&void 0!=this.titleData[t].width?(this.setWid=this.setWid+parseInt(this.titleData[t].width),this.dataWid[t]=parseInt(this.titleData[t].width)-31):(this.count++,this.notWid.push(t))},getRemainWid:function(t,e){var i=(t-this.setWid)/this.count-31,s=!0,a=!1,o=void 0;try{for(var n,h=d()(this.notWid);!(s=(n=h.next()).done);s=!0){var r=n.value;this.$set(this.dataWid,r,i)}}catch(t){a=!0,o=t}finally{try{!s&&h.return&&h.return()}finally{if(a)throw o}}this.$set(this.dataWid,this.notWid.length-1,i-e)},arrayInit:function(){for(var t in this.countT=0,this.countF=0,this.datas)for(var e in this.isShowMore[t]=[],this.reallyShow[t]=[],this.iconShow[t]=[],this.isSelect[t]=this.isSelect[t]||!1,this.isSelect[t]&&0!=t?this.countT++:this.isSelect[t]||0==t||this.countF++,this.titleData)this.isShowMore[t][e]=!1,this.reallyShow[t][e]=!1,this.iconShow[t][e]=!1;this.isSelect[this.datas.length]?this.countT++:this.isSelect[this.datas.length]||this.countF++,this.isSelect[this.datas.length]=this.isSelect[this.datas.length]},isShow:function(){var t=void 0;for(var e in this.datas)for(var i in this.titleData)void 0!=(t=this.$refs["content"+e+i])&&0!=t.length&&t[0].offsetWidth<t[0].scrollWidth?this.reallyShow[e][i]=!0:this.reallyShow[e][i]=!1},mouseover:function(t,e){this.$set(this.iconShow[t],e,this.reallyShow[t][e]),this.iconShow.push()},mouseLeave:function(t,e){this.$set(this.iconShow[t],e,!1),this.iconShow.push()},moreClick:function(t,e){this.prompt[2]=t,this.prompt[3]=e,-1!=this.prompt[0]&&this.$set(this.isShowMore[this.prompt[0]],this.prompt[1],!1),this.$set(this.isShowMore[t],e,!0),this.isShowMore.push(),this.prompt[0]=t,this.prompt[1]=e,this.$nextTick(function(){this.displayPosition(t,e)})},closeMore:function(t,e){this.$set(this.isShowMore[t],e,!1),this.isShowMore.push()},displayPosition:function(t,e){var i,s,a,o;i=this.$refs["showMore"+t+e][0].offsetHeight,s=this.$refs["row"+t][0].offsetTop,a=this.$refs.bodyRef.offsetHeight,o=this.$refs.bodyRef.scrollTop,this.moreTop=i+s+10>a+o?-(i-36)+"px":"10px"},setCheckbox:function(t){var e=!this.isSelect[t],i=[];if(0==t)this.isSelectAll(e);else{if(this.$set(this.isSelect,t,e),e)this.countT++,this.countF--,this.selectData.push(this.datas[t-1]);else{this.countT--,this.countF++;var s=this.selectData.indexOf(this.selectData[t-1]);this.selectData.splice(s,1)}this.countT==this.isSelect.length-1||this.countF==this.isSelect.length-1?this.isSelectAll(e):this.$set(this.isSelect,0,!1)}if("page"==this.isFlow){var a=l()(this.isSelect);this.pageArr[this.pageNum]=a.slice(0);var o=l()(this.selectData);this.dataSelected[this.pageNum]=o.slice(0);for(var n=0;n<this.dataSelected.length;n++)if(void 0!=this.dataSelected[n])for(var h=0;h<this.dataSelected[n].length;h++)i.push(this.dataSelected[n][h]);this.$emit("selectData",i),this.sendData=i}else this.$emit("selectData",this.selectData),this.sendData=this.selectData},isSelectAll:function(t){t?(this.selectData=JSON.parse(h()(this.datas)),this.countT=this.isSelect.length-1,this.countF=0):(this.selectData=[],this.countF=this.isSelect.length-1,this.countT=0);for(var e=0;e<this.isSelect.length;e++)this.$set(this.isSelect,e,t)},setRadio:function(t){var e=!this.isSelect[t];if(e?(this.selectData=this.datas[t-1],0!=this.countT&&this.$set(this.isSelect,this.countT,!1),this.countT=t):(this.countT=0,this.selectData=[]),this.$set(this.isSelect,t,e),this.$emit("selectData",this.selectData),this.sendData=this.selectData,"page"==this.isFlow){for(var i in this.pageArr)if(void 0!=this.pageArr[i])for(var s in this.pageArr[i])this.pageArr[i][s]=!1;var a=l()(this.isSelect);this.pageArr[this.pageNum]=a.slice(0)}},setCheckWay:function(t,e){"checkbox"==t?this.setCheckbox(e):"radio"==t&&this.setRadio(e)}},created:function(){this.getWid(),this.arrayInit()},mounted:function(){var t=this,e=this,i=void 0;this.titleWid=this.$refs.headerRow.offsetWidth,this.bodyWid=this.$refs.tableBody.offsetWidth,window.onresize=function(){t.titleWid=t.$refs.headerRow.offsetWidth,t.bodyWid=t.$refs.tableBody.offsetWidth},this.$refs.bodyRef.onscroll=function(){if(-1!=e.prompt[0]&&t.displayPosition(t.prompt[0],t.prompt[1]),"flow"==t.isFlow){var s=t.$refs.bodyRef.offsetHeight,a=t.$refs.bodyRef.scrollTop,o=t.$refs.bodyRef.scrollHeight;o!=s+a&&o+17!=s+a||void 0!=t.pageNum&&(i=t.pageNum,i+=1,t.$emit("tablePageNum",{pageNum:i,pageSize:t.pageSize}))}},this.$nextTick(function(){this.isShow()})},filters:{formater:function(t,e,i){var s=void 0===e?"undefined":o()(e);return"undefined"==s?t:"function"==s?e(t,i):"string"==s&&"dateFormat"==e?Object(u.a)(t,i):void 0}},watch:{titleWid:function(t,e){var i=t-this.bodyWid;this.getRemainWid(t,i),this.$nextTick(function(){this.isShow()})},data:function(t,e){if(this.prompt=[-1,-1,-1,-1],"flow"==this.isFlow)0!=this.data.length&&(this.isSelect[0]=!1,this.refresh||1==this.pageNum?(this.$refs.bodyRef.scrollTop=0,this.datas=this.data):this.datas=this.datas.concat(this.data));else if(this.selectData=[],this.datas=this.data,void 0==this.pageArr[this.pageNum])for(var i in this.isSelect)this.isSelect[i]=!1;else this.isSelect=this.pageArr[this.pageNum];this.hasMemory&&!this.refresh||(this.isSelect=[],this.countT=0,this.countF=0,this.selectData=[],this.pageArr=[],this.dataSelected=[],this.sendData=[]),this.$emit("selectData",this.sendData),this.arrayInit(),this.$nextTick(function(){this.titleWid=this.$refs.headerRow.offsetWidth,this.bodyWid=this.$refs.tableBody.offsetWidth;var t=this.titleWid-this.bodyWid;this.getRemainWid(this.titleWid,t),this.isShow()})}}}),p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"table"},[i("div",{staticClass:"table-header back-f8f9fa min-wid"},[i("div",{ref:"headerRow",staticClass:"table-row header-row c9 fs12",style:{height:t.tableHei,lineHeight:t.tableHei}},t._l(t.titleData,function(e,s){return i("div",{staticClass:"row-details pl20 pr10",class:[s==t.titleData.length-1?"":"boder-rig"],style:{width:t.dataWid[s]+"px"}},[i("div",[i("span",{staticClass:"fl pl10"},[0==s&&"checkbox"==t.chooseWay&&"selectBox"==t.selectWay?i("div",{staticClass:"table-checkbox",class:t.isSelect[0]?"select-checkbox":"",style:{marginTop:(parseInt(t.tableHei)-14)/2+"px"},on:{click:function(e){return e.stopPropagation(),t.setCheckbox(0)}}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-gou"}})])]):t._e(),t._v(" "),0==s&&"radio"==t.chooseWay&&"selectBox"==t.selectWay?i("div",{staticClass:"table-radio",staticStyle:{visibility:"hidden"},style:{marginTop:(parseInt(t.tableHei)-14)/2+"px"}},[i("svg",{staticClass:"icon fs14 radio-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-gou"}})])]):t._e()]),t._v(" "),i("span",{staticClass:"pl10"},[t._v("\n            "+t._s(e.title)+"\n          ")])])])}),0)]),t._v(" "),i("div",{ref:"bodyRef",staticClass:"table-body min-wid"},[i("div",{ref:"tableBody"},t._l(t.datas,function(e,s){return i("div",{ref:"row"+s,refInFor:!0,staticClass:"table-row body-row c3 fs12 border-bott",class:[s%2==0?"back-white":"back-f8f9fa",t.isSelect[s+1]&&"row"==t.selectWay?"table-row-active":""],style:{height:t.tableHei,lineHeight:t.tableHei},on:{click:function(e){return e.stopPropagation(),t.setCheckWay(t.chooseWay,s+1)}}},t._l(t.titleData,function(a,o){return i("div",{staticClass:"row-details pl20 pr10",class:[o==t.titleData.length-1?"":"boder-rig"],staticStyle:{position:"relative"},style:{width:t.dataWid[o]+"px"},on:{mouseenter:function(e){return t.mouseover(s,o)},mouseleave:function(e){return t.mouseLeave(s,o)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.iconShow[s][o],expression:"iconShow[ind][index]"}],staticClass:"more-icon cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.moreClick(s,o)}}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-iiconfont-angle-up"}})])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMore[s][o],expression:"isShowMore[ind][index]"}],staticClass:"show-more",style:{top:t.moreTop},on:{click:function(t){t.stopPropagation()}}},[i("div",{ref:"showMore"+s+o,refInFor:!0,staticClass:"more-details",domProps:{innerHTML:t._s(t.$options.filters.formater(e[a.name],a.formater,a.pattern))}}),t._v(" "),i("span",{staticClass:"details-close cursor-pointer",on:{click:function(e){return e.stopPropagation(),t.closeMore(s,o)}}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-guanbi2"}})])])]),t._v(" "),"button"==a.type?i("span",t._l(a.operations,function(t){return i("span",{staticClass:"pl10 cursor-pointer color-1188dd",attrs:{title:t.text},on:{click:function(i){return i.stopPropagation(),t.callBack(e)}}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":t.icon}})])])}),0):i("div",{ref:"content"+s+o,refInFor:!0,staticClass:"ellip"},[i("span",{directives:[{name:"show",rawName:"v-show",value:0==o&&"selectBox"==t.selectWay,expression:"index==0&&selectWay=='selectBox'"}],staticClass:"pl10 fl"},["checkbox"==t.chooseWay?i("div",{staticClass:"table-checkbox",class:t.isSelect[s+1]?"select-checkbox":"",style:{marginTop:(parseInt(t.tableHei)-14)/2+"px"},on:{click:function(e){return e.stopPropagation(),t.setCheckbox(s+1)}}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-gou"}})])]):t._e(),t._v(" "),"radio"==t.chooseWay?i("div",{staticClass:"table-radio cursor-pointer",class:t.isSelect[s+1]?"select-radio":"",style:{marginTop:(parseInt(t.tableHei)-14)/2+"px"},on:{click:function(e){return e.stopPropagation(),t.setRadio(s+1)}}},[i("svg",{staticClass:"icon fs14 radio-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-gou"}})])]):t._e()]),t._v(" "),i("span",{staticClass:"pl10",domProps:{innerHTML:t._s(t.$options.filters.formater(e[a.name],a.formater,a.pattern))}})])])}),0)}),0)])]),t._v(" "),t.isRequest||"flow"!=t.isFlow?t._e():i("div",{staticStyle:{"margin-left":"calc(50% - 14px)","margin-top":"10px"}},[t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"loading"}},[e("div",{staticClass:"loadAnimation"}),this._v(" "),e("div",{staticClass:"loadAnimation"}),this._v(" "),e("div",{staticClass:"loadAnimation"}),this._v(" "),e("div",{staticClass:"loadAnimation"}),this._v(" "),e("div",{staticClass:"loadAnimation"}),this._v(" "),e("div",{staticClass:"loadAnimation"})])}]};var g=i("VU/8")(f,p,!1,function(t){i("7ysL")},"data-v-788516a5",null).exports,m=i("mtWM"),v=i.n(m),S={name:"tableTest",data:function(){return{title:[{name:"service",title:"服务",width:"200px"},{name:"name",title:"组名",width:"200px"},{name:"domain",title:"域名",width:""},{name:"autoFailover",title:"故障切换策略",width:"201px"},{name:"ctime",title:"修改时间",formater:"dateFormat",pattern:"Y-M-D h:m:s"},{name:"ctime",title:"修改时间",formater:function(t,e){var i=new Date(parseInt(t)),s=i.getFullYear(),a=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,o=i.getDate()<10?"0"+i.getDate():i.getDate(),n=i.getHours()<10?"0"+i.getHours():i.getHours(),h=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),r=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();return"年月日"==e||1==e?s+"年"+a+"月"+o+"日":"Y-M-D"==e||2==e?s+"-"+a+"-"+o:"Y.M.D"==e||3==e?s+"."+a+"."+o:"Y/M/D"==e||4==e?s+"/"+a+"/"+o:"年月日 时分秒"==e||5==e?s+"年"+a+"月"+o+"日 "+n+":"+h+":"+r:"Y-M-D h:m:s"==e||6==e?s+"-"+a+"-"+o+" "+n+":"+h+":"+r:"Y.M.D h:m:s"==e||7==e?s+"."+a+"."+o+" "+n+":"+h+":"+r:"Y/M/D h:m:s"==e||8==e?s+"/"+a+"/"+o+" "+n+":"+h+":"+r:"年月日 时分"==e||9==e?s+"年"+a+"月"+o+"日 "+n+":"+h:"Y-M-D h:m"==e||10==e?s+"-"+a+"-"+o+" "+n+":"+h:"Y.M.D h:m"==e||11==e?s+"."+a+"."+o+" "+n+":"+h:"Y/M/D h:m"==e||12==e?s+"/"+a+"/"+o+" "+n+":"+h:t},pattern:"Y-M-D h:m:s"},{name:"operation",title:"操作",type:"button",width:"100px",operations:[{icon:"#icon-rilizuo",text:"扩容",callBack:function(t){console.log(t)}},{icon:"#icon-rilizuo",text:"修改",callBack:function(t){console.log(t)}},{icon:"#icon-rilizuo",text:"test",callBack:function(t){console.log(t),alert("ssss")}}]}],datas:[],chooseWay:"checkbox",selectWay:"row",selectDatas:[],tableHei:"42px",isFlow:"page",refresh:!1,hasMemory:!0,pageSize:20,pageNum:1,totalPage:1,limits:[10,20,30,40,50,60],isRequest:!1}},methods:{getData:function(t){this.selectDatas=t,console.log(t),this.refresh=!1},refreshAlarm:function(){this.pageNum=1,this.refresh=!0,this.getTableData()},getTableData:function(){var t=this;this.isRequest=!1,v.a.get("http://13.15.11.34:3000/getlist",{params:{pageSize:this.pageSize,pageNum:this.pageNum}}).then(function(e){t.totalPage=e.data.totalPage,t.datas=e.data.data,t.isRequest=!0}).catch(function(t){alert("请求失败了哦")})},getPageData:function(t){this.pageSize=t.pageSize,this.pageNum=t.pageNum}},created:function(){this.getTableData()},watch:{pageSize:function(t,e){this.getTableData()},pageNum:function(t,e){this.getTableData()}},components:{loongPagination:s.a,loongTable:g}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("button",{staticClass:"button-common confirm-button",on:{click:function(e){return t.refreshAlarm()}}},[t._v("刷新")]),t._v(" "),i("div",{staticStyle:{height:"calc(100% - 100px)"}},[i("loongTable",{attrs:{titleData:t.title,data:t.datas}})],1),t._v(" "),t.isRequest&&"page"==t.isFlow?i("loongPagination",{attrs:{totalPage:t.totalPage,limits:t.limits,pageNum:t.pageNum,pageSize:t.pageSize},on:{pageInfo:t.getPageData}}):t._e()],1)},staticRenderFns:[]};var b=i("VU/8")(S,w,!1,function(t){i("PVoh")},"data-v-db73e1a0",null);e.default=b.exports},PVoh:function(t,e){},"x/SH":function(t,e){}});
//# sourceMappingURL=4.1420d9dd316846ebf9e2.js.map